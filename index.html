<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <title>Merry Christmas Hua Hua</title>
    <link rel="stylesheet" href="style.css">
    <script>
        const audio = new Audio('hbdfb.mp3');
        // ãƒšãƒ¼ã‚¸ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚‰inité–¢æ•°ã‚’å‘¼ã³å‡ºã™
        // window.onload = init;

        // inité–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹é–“éš”
        // ä»Šå›ã¯10ãƒŸãƒªç§’ã”ã¨
        const INTERVAL = 30;

        // è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã®ã‚µã‚¤ã‚ºã‚’å–å¾—
        // widthã‚µã‚¤ã‚ºã®å–å¾—
        let wSize = document.documentElement.clientWidth;
        // heightã‚µã‚¤ã‚ºã®å–å¾—
        let hSize = document.documentElement.clientHeight;

        // çœ‹æ¿ã®è¨­å®š
        // setTimeoutã®ã‚¿ã‚¤ãƒãƒ¼ã®è¨­å®š
        let timer;
        // STOP/STARTãƒœã‚¿ãƒ³(ä»¥ä¸‹ï¼Œçœ‹æ¿)ã®ã‚ªãƒ³/ã‚ªãƒ•
        let animating = false;
        // çœ‹æ¿ã®ç”»åƒåˆ‡ã‚Šæ›¿ãˆ
        let kanban = 'start';

        // ã‚µãƒ³ã‚¿ã®ï½˜åº§æ¨™ã®åˆæœŸä½ç½®
        let x = wSize + 500;
        // ã‚µãƒ³ã‚¿ã®ï½™åº§æ¨™ã®åˆæœŸä½ç½®
        let y = 100;
        // ã‚µãƒ³ã‚¿ã‚’å‹•ã‹ã™ã‚¹ã‚¤ãƒƒãƒ
        let s_switch = true;
        // ã‚µãƒ³ã‚¿ãŒxåº§æ¨™ã§é€²ã‚€é€Ÿã•
        let x_santa_speed = 1.5;

        // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’å‹•ã‹ã™ã‚¹ã‚¤ãƒƒãƒ
        let p_switch = true;
        // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã®ï½™åº§æ¨™ã®åˆæœŸä½ç½®
        let py = 150;
        // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã®ç”»åƒã‚µã‚¤ã‚ºã®åˆæœŸå€¤
        let wp = 125;
        // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã®ç”»åƒã‚µã‚¤ã‚ºã®å¤‰æ›´ã®é€Ÿã•
        const S_PRESENT_SPEED = 0.2;
        // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã®å›è»¢ã®åˆæœŸå€¤
        let pr = 0;
        // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã®å›è»¢ã™ã‚‹æ–¹å‘
        let d = 'left';
        // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãŒï½™åº§æ¨™ã§é€²ã‚€é€Ÿã•
        const Y_PRESENT_SPEED = 1.5;

        // èŠ±ç«ï½™åº§æ¨™ã®åˆæœŸä½ç½®
        let hy = hSize;
        // èŠ±ç«ãŒæ‰“ã¡ã‚ãŒã£ã¦ã„ã‚‹é€Ÿã•
        const Y_HANABI_SPEED = 5;
        // èŠ±ç«ãŒfideoutã™ã‚‹ã¾ã§ã®é€Ÿã•
        let fo = 1;

        // ã‘ã‚€ã‚Šã®å›è»¢ã®åˆæœŸå€¤
        let kr = 0;
        let krr = 0;
        // ã‘ã‚€ã‚Šã®å›è»¢ã™ã‚‹æ–¹å‘
        let dd = 'left';

        fungsiAwal = 0;

        // çœ‹æ¿ã®ã‚ªãƒ³/ã‚ªãƒ•é–¢æ•°
        function startstop() {
            let kanban_start = document.getElementById('start');
            let kanban_stop = document.getElementById('stop');

            // çœ‹æ¿ãŒstartã‹ï¼Ÿ
            if (kanban === 'start') {
                kanban = 'stop';
                kanban_start.style.display = "none";
                kanban_stop.style.display = "block";
                // audio.pause();
            } else {
                kanban = 'start';
                kanban_stop.style.display = "none";
                kanban_start.style.display = "block";
                // audio.play();
            }
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒTrueã‹ï¼Ÿ
            if (animating) {
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã™
                init();
            } else {
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢ã™ã‚‹
                clearTimeout(timer);
            }
            animating = !animating;
        }


        function openGift() {
            if (fungsiAwal === 0) {
                audio.play();
                fungsiAwal = 1;
                kadoIn.style = "transition:all .8s ease;transform:scale(10);opacity:0";
                setTimeout(initengahan, 300);
                setTimeout(init, 500);
            }
        }


        function initengahan() {
            kadoIn.style = "display:none";
            ket.style = "display:none";
            page1.style = "display:none";
            page2.style = "transform: scale(1.5);";
            page2.style = "display:block";
        }


        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
        function init() {
            // ã“ã“ã‹ã‚‰ã‚µãƒ³ã‚¿ã‚¾ãƒ¼ãƒ³
            // audio.play();
            let santa = document.getElementById('santa');
            // ç”»é¢ã®çœŸã‚“ä¸­ã®ï½˜åº§æ¨™ã®å–å¾—(åˆ‡ã‚Šä¸Šã’)
            let han_wSize = Math.ceil((wSize / 2));
            santa.style.left = x + "px";
            santa.style.top = y + "px";

            // ã‚µãƒ³ã‚¿ã®ãã‚Šã«å‹•ãã‚’ã¤ã‘ã‚‹
            if (y > 120) y = 100;
            // ã‚µãƒ³ã‚¿ãŒç”»é¢å¤–ã«è¡Œãã¾ã§ã‚µãƒ³ã‚¿ã‚’å‹•ã‹ã™
            if (x > -300 && s_switch) {
                x -= x_santa_speed;
                y += 0.5;
            } else {
                s_switch = false;
            }

            // ã“ã“ã‹ã‚‰ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚¾ãƒ¼ãƒ³
            let present = document.getElementById('present');
            let present_size = document.getElementById('present_fall');

            // ã‚µãƒ³ã‚¿ãŒç”»é¢åŠåˆ†ã¾ã§ããŸã‚‰ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’è½ã¨ã™
            if (x < (han_wSize + 20000 / wSize) && p_switch) {

                present.style.display = "block";
                py += Y_PRESENT_SPEED;
                wp -= S_PRESENT_SPEED;
                present.style.top = py + "px";
                present_size.style.width = wp + "px";

                // ã‚µãƒ³ã‚¿ãŒãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’è½ã¨ã—ãŸã‚‰åŠ é€Ÿã•ã›ã‚‹
                x_santa_speed = 3;

                // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãŒå›è»¢ã•ã›ã‚‹
                if (pr > 25) {
                    d = 'right';
                } else if (pr < -25) {
                    d = 'left';
                }
                if (d === 'left') {
                    pr += 0.5;
                } else if (d === 'right') {
                    pr -= 0.5;
                }

                present.style.transform = "rotate(" + pr + "deg)";
            }
            // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãŒç”»é¢å¤–ã«è¡Œã£ãŸã‚‰å‹•ã‹ãªã„ã‚ˆã†ã«ã™ã‚‹
            if (py > hSize - 140) {

                p_switch = false;
                present.style.display = "none";

                // ã“ã“ã‹ã‚‰èŠ±ç«ã‚¾ãƒ¼ãƒ³
                let Hanabi_utiage = document.getElementById('hanabi_utiage');
                Hanabi_utiage.style.display = "block";

                // ç”»é¢ã®3åˆ†ã®1ã®é«˜ã•ã¾ã§ãã‚‹ã¾ã§èŠ±ç«ã‚’å‹•ã‹ã™
                if (hy > hSize / 3) {
                    hy -= Y_HANABI_SPEED;
                } else {
                    Hanabi_utiage.style.display = "none";
                    let Hanabi = document.getElementById('hanabi');
                    let text = document.getElementById('text');
                    Hanabi.style.display = "block";
                    text.style.display = "block";
                    Hanabi.style.opacity = fo;

                    // èŠ±ç«ã®ã‚ªãƒ‘ã‚·ãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹
                    if (fo > 0) {
                        fo -= 0.01;
                    } else {
                        // èŠ±ç«ãŒæ¶ˆãˆãŸã‚ã¨ã®ãƒªã‚»ãƒƒãƒˆå‡¦ç†
                        Hanabi.style.display = "none";
                        text.style.display = "none";
                        s_switch = true;
                        p_switch = true;
                        py = 150;
                        wp = 125;
                        fo = 1;
                        x_santa_speed = 1.5;
                        // â†“ç”»é¢ã‚µã‚¤ã‚ºãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã®ãŸã‚ã«åº§æ¨™ã‚’æ›´æ–°
                        hy = document.documentElement.clientHeight;
                        x = document.documentElement.clientWidth;
                    }
                }
                Hanabi_utiage.style.top = hy + "px";
            }
            // ã“ã“ã‹ã‚‰ã‘ã‚€ã‚Šã‚¾ãƒ¼ãƒ³
            let Kemuri = document.getElementById('kemuri');
            // ã‘ã‚€ã‚Šã‚’å›è»¢ã•ã›ã‚‹
            if (kr > 25) {
                dd = 'right';
            } else if (kr < -25) {
                dd = 'left';
            }
            if (dd === 'left') {
                kr += 1;
                Kemuri.style.transform = "rotate(" + krr + "deg)";
                krr = 0;
            } else if (dd === 'right') {
                kr -= 1;
                Kemuri.style.transform = "rotate(" + krr + "deg)";
                krr = 10;
            }
            timer = setTimeout("init()", INTERVAL);
        }
    </script>
</head>

<body>
<!--<audio src="hbdfb.mp3" id="linkmp3" class="sembunyi"></audio>-->

<div id="view">

    <div id="page1">
        <div id="kadoIn" onclick="openGift();">
            <!-- Tombol Surat --><img src="images/kado.png" height="500px"/>
        </div>
        <p id="ket">Nháº¥n vÃ o Ä‘Ã¢y Ä‘á»ƒ nháº­n quÃ  chá»© cÃ²n Ä‘á»£i gÃ¬ ná»¯a ğŸ˜œ</p>
    </div>


    <div id="page2" style="display: none">
        <img id="start" class="button" onclick="startstop();" src="images/kanban_start.png" alt="ã‚¹ãƒˆãƒƒãƒ—ï¼Œã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³">
        <img id="stop" class="button" onclick="startstop();" src="images/kanban_stop.png" alt="ã‚¹ãƒˆãƒƒãƒ—ï¼Œã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³">
        <img id="santa" src="images/christmas_santa_sori.png" alt="é£›ã‚“ã§ã„ã‚‹ã‚µãƒ³ã‚¿ã®ç”»åƒ" width="300px" height="auto">

        <div id="present">
            <img id="present_fall" src="images/otanjoubi_birthday_present_balloon.png" alt="ã‚µãƒ³ã‚¿ãŒè½ã¨ã—ãŸãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã®ç”»åƒ"
                 width="125px" height="auto">
        </div>

        <img id="hanabi_utiage" src="images/hanabi_utiage.png" alt="æ‰“ã¡ã‚ãŒã£ã¦ã„ã‚‹èŠ±ç«" width="50px" height="auto">
        <img id="hanabi" src="images/hanabi.png" alt="èŠ±ç«ã®ç”»åƒ">
        <img id="yama" src="images/yama.png" alt="ç«å±±ã®ç”»åƒ" width="500px" height="auto">
        <img id="kemuri" src="images/kemuri.png" alt="ç«å±±ã®ç”»åƒ" width="175px" height="auto">

        <h1 id="text" style="display: none">Merry Christmas</h1>


    </div>


</div>
</body>
</html>
